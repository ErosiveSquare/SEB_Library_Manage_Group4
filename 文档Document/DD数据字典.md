# 软件数据字典 (Data Dictionary)

上下文：**DFD描述（File 1）**与**数据设计表（File 2）**

模型：Gemini3pro

**项目名称：** 图书馆自动化管理系统
**编写日期：** 2025-12-23
**参考标准：** GB/T 8567-2006

## 1. 数据项定义 (Data Items)
*数据项是数据的最小逻辑单位。以下定义了系统中核心的、跨模块使用的关键数据项。*

| 数据项名       | 标识符/别名        | 类型及宽度     | 取值范围                               | 说明                                 | 来源        |
| :------------- | :----------------- | :------------- | :------------------------------------- | :----------------------------------- | :---------- |
| **读者编号**   | `READER_ID`        | BIGINT (20)    | 系统自动生成 / 学号                    | 唯一标识每一位读者的主键             | 读者信息表  |
| **图书条码**   | `BARCODE`          | VARCHAR (20)   | 字母+数字组合                          | 粘贴在图书实物上的唯一标识，区分复本 | 图书流通库  |
| **国际书号**   | `ISBN`             | VARCHAR (20)   | 符合ISBN-13标准                        | 标识某种特定的出版物                 | 书目信息    |
| **中图分类号** | `CALL_NUMBER`      | VARCHAR (50)   | 符合中图法规则                         | 决定图书在书架上的物理位置           | 编目模块    |
| **图书状态**   | `STATUS`           | TINYINT (1)    | 1:在馆, 2:借出, 3:预约, 4:报损, 5:遗失 | 决定图书是否可被借阅的核心标志       | 图书流通库  |
| **借阅状态**   | `BORROW_STATUS`    | TINYINT (1)    | 1:借出, 2:已还, 3:超期                 | 标识借阅流水当前的生命周期           | 借阅记录表  |
| **处理状态**   | `ACQ_STATUS`       | TINYINT (1)    | 0:未处理, 1:已加入订单, 2:驳回         | 采访荐购流程中的状态流转             | 采访清单    |
| **读者等级**   | `LEVEL_ID`         | INT (4)        | 1~99 (如1:本科, 3:教师)                | 决定读者借阅天数和册数的权限代码     | 信用等级表  |
| **金额/价格**  | `PRICE` / `AMOUNT` | DECIMAL (10,2) | ≥ 0.00                                 | 记录书价或罚款金额，精确到分         | 订单/处罚表 |

---

## 2. 数据结构定义 (Data Structures)
*数据结构描述数据项的逻辑组合，对应数据库中的实体（表）。*

### 2.1 读者信息 (Reader_Info)
* **简述**：存储读者的基本档案、身份认证及当前权限状态信息。
* **组成**：
    ```text
    读者信息 = 读者编号(READER_ID) + 姓名(NAME) + 性别(SEX) + 
               部门/学院(DEPT_NAME) + 读者等级ID(LEVEL_ID) + 
               账号状态(STATUS) + 有效期(EXPIRY_DATE) + 登录密码(PASSWORD)
    ```
* **相关存储**：`READER_INFO` (D5)

### 2.2 图书流通库存 (Book_Stock)
* **简述**：描述馆内每一本实物图书的详细属性及当前流通状态。
* **组成**：
    ```text
    流通库存 = 图书条码(BARCODE) + ISBN + 索书号(CALL_NUMBER) + 
               书名(BOOK_NAME) + 作者(AUTHOR) + 馆藏地(LOCATION) + 
               图书状态(STATUS) + 入库日期(ENTRY_DATE)
    ```
* **相关存储**：`BOOK_STOCK` (D4)

### 2.3 采购订单 (Purchase_Order)
* **简述**：描述图书馆向书商发起的采购请求，包含订单头部信息和多条图书明细。
* **结构类型**：主从结构
* **组成**：
    ```text
    采购订单 = 订单头 + { 订单明细 }

    [订单头] = 订单号(ORDER_NO) + 采购人(PURCHASER) + 采购日期 + 
               书商ID(SUPPLIER_ID) + 总金额(TOTAL_PRICE)
               
    [订单明细] = 行号(LINE_ID) + 书名 + ISBN + 作者 + 出版社 + 
                 单价(PRICE) + 订购数量(QUANTITY) + 到货数量(ARRIVED_QTY)
    ```
* **相关存储**：`ORDER_HEAD` + `ORDER_LINE`

### 2.4 借阅流水记录 (Borrow_Record)
* **简述**：记录读者借阅图书的全过程，连接读者与图书实体。
* **组成**：
    ```text
    借阅流水 = 流水号(BORROW_ID) + 读者编号(READER_ID) + 图书条码(BARCODE) + 
               借阅时间(BORROW_DATE) + 应还时间(DUE_DATE) + 
               [ 实际归还时间(RETURN_DATE) | Null ] + 借阅状态(STATUS)
    ```
* **相关存储**：`BORROW_RECORD` (D6)

### 2.5 处罚记录 (Punishment_Record)
* **简述**：记录因超期、丢失或损坏图书产生的违规及罚款信息。
* **组成**：
    ```text
    处罚记录 = 处罚单号(PUNISH_ID) + 读者编号(READER_ID) + 
               [ 关联借阅号(BORROW_ID) | Null ] + 处罚原因(REASON) + 
               罚款金额(AMOUNT) + 产生时间 + 缴费状态(IS_PAID)
    ```
* **相关存储**：`PUNISHMENT_RECORD` (D7)

---

## 3. 数据流定义 (Data Flows)
*数据流描述数据在DFD各处理过程之间的传输路径和内容。*

### 3.1 F1 - 荐购信息流 (Reader Recommendation)
* **简述**：读者通过Web端或线下向图书馆提交的希望购买的书籍信息。
* **来源**：外部实体：读者
* **去向**：处理过程：1.1.1 采访验收
* **数据组成**：
    ```text
    荐购信息 = 读者编号 + 书名 + (作者) + (ISBN) + (出版社) + 推荐理由 + 提交日期
    ```

### 3.2 F2 - 验收合格数据 (Verified Receipt)
* **简述**：采访到货后，经过实物验收确认合格，准备进入编目环节的数据。
* **来源**：处理过程：1.1.3 验收
* **去向**：处理过程：1.2.1 取采访（写入 `ACCEPTANCE_LIST`）
* **数据组成**：
    ```text
    验收数据 = 订单行号(LINE_ID) + 实收数量 + 验收人 + 验收日期 + 验收标记(合格)
    ```

### 3.3 F3 - 入库移送单 (Stock Transfer)
* **简述**：编目完成后，将新书数据正式写入流通库的操作数据流，标志着图书上架。
* **来源**：处理过程：1.2.4 移送
* **去向**：数据存储：`BOOK_STOCK` (D4) 和 `JOURNAL_STOCK` (D9)
* **数据组成**：
    ```text
    移送单 = 移送批次时间 + 操作员 + 
             { 图书条码 + ISBN + 索书号 + 书名 + 作者 + 馆藏地 + 初始状态(1:在馆) }
    ```

### 3.4 F4 - 借书请求 (Borrow Request)
* **简述**：流通台扫描读者证和图书条码时产生的数据流，用于触发借阅逻辑。
* **来源**：外部实体：流通部 (输入至 1.3.1)
* **去向**：处理过程：1.3.1 借书
* **数据组成**：
    ```text
    借书请求 = 读者编号(READER_ID) + 图书条码(BARCODE) + 操作员ID + 请求时间
    ```

### 3.5 F5 - 延期申请 (Extension Application)
* **简述**：读者在Web端发起的延长图书借阅期限的申请。
* **来源**：处理过程：1.5.1 填写延期申请
* **去向**：处理过程：1.4.11 延期申请审批 (写入 `EXTENSION_APP`)
* **数据组成**：
    ```text
    延期申请 = 申请编号 + 读者编号 + 借阅流水号(BORROW_ID) + 申请理由 + 申请时间
    ```

### 3.6 F6 - 违规处罚通知 (Punishment Notice)
* **简述**：系统检测到超期或损坏时，生成的需要写入记录并通知读者的信息。
* **来源**：处理过程：1.3.2 还书 / 1.3.4 预约到期检查
* **去向**：数据存储：`PUNISHMENT_RECORD` (D7)
* **数据组成**：
    ```text
    处罚信息 = 读者编号 + 违规类型(超期/爽约/损坏) + 罚款金额 + 生成时间
    ```

---

## 4. 数据存储定义 (Data Stores)
*数据存储描述DFD中数据的静态存储位置，严格对应数据库表。*

| 编号    | 数据存储名称     | 对应数据库表名                      | 输入数据流 (来源)                 | 输出数据流 (去向)             | 主要内容说明                             |
| :------ | :--------------- | :---------------------------------- | :-------------------------------- | :---------------------------- | :--------------------------------------- |
| **D1**  | **字典**         | `SUPPLIER_DICT`<br>`PUBLISHER_DICT` | 1.6.3 字典维护                    | 1.1.2 订单管理                | 存储书商、出版社、中图法等基础参照数据   |
| **D2**  | **采访清单**     | `ACQUISITION_LIST`                  | 1.1.1 采访验收                    | 1.1.2 订单管理                | 记录读者荐购及待处理的购书请求           |
| **D3**  | **验收清单**     | `ACCEPTANCE_LIST`                   | 1.1.3 验收                        | 1.2.1 取采访                  | 存储已到货且验收合格，等待编目的书目     |
| **D4**  | **图书流通库表** | `BOOK_STOCK`                        | 1.2.4 移送<br>1.3.2 还书          | 1.2.2 编目查重<br>1.3.1 借书  | **核心表**：全馆图书的实物及流通状态信息 |
| **D5**  | **读者信息表**   | `READER_INFO`                       | 1.4.2 录入读者<br>1.4.10 惩罚降级 | 1.3.1 借书验证<br>1.5 Web登录 | 读者的身份信息、权限等级及账号状态       |
| **D6**  | **借阅记录**     | `BORROW_RECORD`                     | 1.3.1 借书                        | 1.3.2 还书<br>1.3.4 超期检查  | 所有历史借还流水及当前借出记录           |
| **D7**  | **处罚记录**     | `PUNISHMENT_RECORD`                 | 1.3.2 还书(超期)<br>1.3.4 爽约    | 1.4.10 惩罚降级<br>统计报表   | 记录读者的罚款及违规历史                 |
| **D8**  | **预约信息**     | `RESERVATION`                       | 1.3.3 图书预约                    | 1.3.4 预约到期检查            | 读者的图书预约排队及取书状态             |
| **D9**  | **期刊库表**     | `JOURNAL_STOCK`                     | 1.2.4 移送                        | 1.2.2 编目查重                | 期刊、杂志的馆藏信息                     |
| **D10** | **新书通报表**   | `BOOK_STOCK` (逻辑视图)             | 1.2.5 新书通报                    | 1.5.2 查询新书                | 用于Web端展示最新入库的图书              |