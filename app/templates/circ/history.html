{% extends "base.html" %}
{% block page_title %}我的借阅历史 / History{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header-row">
        <div class="card-title">借阅流水记录</div>
    </div>
    <table class="clean-table">
        <thead>
            <tr>
                <th>图书信息</th>
                <th>借阅日期</th>
                <th>应还日期</th>
                <th>归还日期</th>
                <th>当前状态</th>
            </tr>
        </thead>
        <tbody>
            {% for r in records %}
            <tr>
                <td>
                    <div style="font-weight: 600;">{{ r['BOOK_NAME'] }}</div>
                    <div style="font-size: 12px; color: #888;">{{ r['BARCODE'] }} | {{ r['AUTHOR'] }}</div>
                </td>
                <td>{{ r['BORROW_DATE'] }}</td>
                <td>{{ r['DUE_DATE'] }}</td>
                <td>{{ r['RETURN_DATE'] if r['RETURN_DATE'] else '-' }}</td>
                <td>
                    {% if r['STATUS'] == 1 %}
                        <span style="color:#10b981; background:#ecfdf5; padding:2px 8px; border-radius:10px; font-size:12px;">借阅中</span>
                    {% elif r['STATUS'] == 2 %}
                        <span style="color:#64748b; background:#f1f5f9; padding:2px 8px; border-radius:10px; font-size:12px;">已归还</span>
                    {% elif r['STATUS'] == 3 %}
                        <span style="color:#ef4444; background:#fef2f2; padding:2px 8px; border-radius:10px; font-size:12px;">已逾期</span>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5" style="text-align:center; padding:30px;">暂无历史记录</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}