<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCEPU图书馆管理系统 - 登录</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        /* --- 核心基础设置 --- */
        :root {
            --brand-blue: #004b9e; /* 华电蓝/深蓝 */
            --glass-bg: rgba(12, 45, 90, 0.65);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-shine: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            /* 使用 Flask url_for 加载动态背景图 */
            background: url("{{ url_for('static', filename='asset/BG2.png') }}") no-repeat center center/cover;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.3));
            z-index: -1;
        }

        .login-container {
            width: 1000px;
            height: 600px;
            border-radius: 24px;
            display: flex;
            position: relative;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .left-panel {
            width: 50%;
            position: relative;
            padding: 48px;
            display: flex;
            flex-direction: column;
            color: white;
            z-index: 1;
            background: linear-gradient(135deg, rgba(12, 45, 90, 0.55) 0%, rgba(12, 45, 90, 0.35) 100%);
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            box-shadow: inset -1px 0 0 0 rgba(255, 255, 255, 0.1);
        }

        .left-panel::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 40%);
            pointer-events: none; z-index: -1;
        }

        .left-panel::after {
            content: '';
            position: absolute; width: 500px; height: 500px;
            border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 50%;
            top: -150px; right: -150px;
            pointer-events: none;
        }

        .header-logo { display: flex; align-items: center; margin-bottom: 50px; height: 50px; }

        .header-logo-img {
            height: 100%;
            width: auto; max-width: 220px; object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); margin-right: 15px;
        }

        .system-name {
            font-size: 18px;
            border-left: 1px solid rgba(255,255,255,0.3);
            padding-left: 15px; margin-left: 5px; font-weight: 500;
            letter-spacing: 1px; text-shadow: 0 2px 4px rgba(0,0,0,0.2); white-space: nowrap;
        }

        .welcome-text h2 {
            font-size: 30px;
            margin-bottom: 16px; font-weight: 600;
            line-height: 1.2; text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .welcome-text p { font-size: 15px; opacity: 0.85; line-height: 1.7; font-weight: 300; }

        .info-card {
            margin-top: auto;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.1), 0 10px 30px rgba(0, 0, 0, 0.15);
            border-radius: 16px;
            padding: 24px; transition: transform 0.3s ease;
        }

        .info-card:hover { background: rgba(255, 255, 255, 0.12); }

        .card-title { display: flex; align-items: center; font-size: 15px; font-weight: 600; margin-bottom: 18px; color: rgba(255,255,255,0.95); }
        .card-title i { margin-right: 10px; color: #64b5f6; }
        .card-subtitle { font-size: 11px; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; margin-left: auto; opacity: 0.9; }

        .time-row { display: flex; align-items: center; margin-bottom: 14px; background: rgba(0, 0, 0, 0.15); padding: 12px 16px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.03); }
        .time-row:last-child { margin-bottom: 0; }
        .time-icon { margin-right: 14px; font-size: 16px; color: rgba(255,255,255,0.7); }
        .time-content label { display: block; font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 3px; text-transform: uppercase; letter-spacing: 0.5px; }
        .time-content span { font-size: 15px; font-weight: 500; font-feature-settings: "tnum"; }

        .right-panel {
            width: 50%;
            background: rgba(255, 255, 255, 0.96); padding: 60px 70px;
            display: flex; flex-direction: column; justify-content: center; position: relative;
        }

        .auth-title { text-align: center; color: #1a1a1a; font-size: 24px; font-weight: 700; margin-bottom: 8px; }
        .auth-subtitle { text-align: center; color: #888; font-size: 13px; margin-bottom: 35px; }

        .tab-title { text-align: center; font-size: 16px; margin-bottom: 30px; position: relative; }
        .tab-title span { padding-bottom: 10px; border-bottom: 3px solid var(--brand-blue); color: var(--brand-blue); font-weight: 600; }

        .form-group { margin-bottom: 24px; }

        .input-wrapper {
            display: flex;
            align-items: center; background: #f2f4f7;
            border: 1px solid transparent; border-radius: 8px; padding: 0 16px;
            height: 48px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .input-wrapper:hover { background: #eaecf0; }
        .input-wrapper:focus-within { background: #fff; border-color: var(--brand-blue); box-shadow: 0 0 0 4px rgba(0, 75, 158, 0.1); }
        .input-wrapper i { color: #98a2b3; font-size: 16px; width: 24px; text-align: center; transition: color 0.3s; }
        .input-wrapper:focus-within i { color: var(--brand-blue); }

        .input-wrapper input {
            flex: 1;
            border: none; background: transparent; height: 100%;
            padding-left: 12px; outline: none; font-size: 15px; color: #333; font-weight: 500;
        }
        .input-wrapper input::placeholder { color: #aaa; font-weight: 400; }

        .captcha-group { display: flex; gap: 12px; }
        .captcha-img {
            width: 110px;
            height: 48px; background: #e0e0e0; border-radius: 8px; cursor: pointer;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="110" height="48" viewBox="0 0 110 48"><rect width="100%" height="100%" fill="%23f2f4f7"/><text x="50%" y="55%" font-family="Arial" font-size="22" font-weight="bold" font-style="italic" fill="%23004b9e" dy=".3em" text-anchor="middle" letter-spacing="3">7392</text><path d="M5,40 Q30,5 60,40 T100,10" stroke="%23ccc" fill="none" stroke-width="2"/><circle cx="20" cy="10" r="2" fill="%23999"/><circle cx="90" cy="30" r="2" fill="%23999"/></svg>');
            background-size: cover; transition: opacity 0.2s;
        }
        .captcha-img:hover { opacity: 0.8; }

        .links { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 30px; color: #666; }
        .links a { text-decoration: none; color: #555; transition: color 0.2s; }
        .links a:hover { color: var(--brand-blue); }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .btn-login {
            flex: 2;
            height: 48px; background: linear-gradient(to bottom, #0052d9, #0042b0);
            color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;
            transition: all 0.3s;
            font-weight: 600; letter-spacing: 1px;
            box-shadow: 0 4px 12px rgba(0, 66, 176, 0.3);
        }
        .btn-login:hover { background: linear-gradient(to bottom, #005ce6, #004bca); transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0, 66, 176, 0.4); }
        .btn-login:active { transform: translateY(1px); }

        .btn-guest {
            flex: 1;
            height: 48px;
            background: rgba(255, 255, 255, 0.7);
            color: #555;
            border: 1px solid #d1d5db;
            border-radius: 8px; font-size: 15px; cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            display: flex; align-items: center; justify-content: center;
        }
        .btn-guest:hover {
            background: #f8fafc;
            color: #333;
            border-color: #9ca3af;
        }

        .footer-text { margin-top: 30px; text-align: center; font-size: 12px; color: #999; line-height: 1.6; }

        /* Flask 消息提示样式 */
        .alert-box {
            padding: 10px 15px;
            margin-bottom: 20px; border-radius: 8px; font-size: 14px;
            display: flex; align-items: center; gap: 10px;
        }
        .alert-error { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .alert-success { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }

        @media (max-width: 900px) {
            .login-container { width: 95vw; height: auto; flex-direction: column; }
            .left-panel, .right-panel { width: 100%; padding: 40px; }
            .left-panel { min-height: 300px; }
        }
    </style>
</head>
<body>

    <div class="login-container">
        <div class="left-panel">
            <div class="header-logo">
                <img src="{{ url_for('static', filename='asset/NCEPU_LIB.png') }}" alt="华北电力大学图书馆" class="header-logo-img">
                <div class="system-name">图书管理系统</div>
            </div>

            <div class="welcome-text">
                <h2>欢迎使用<br>NCEPU图书馆管理系统</h2>
                <p>Knowledge • Innovation • Excellence<br>便捷的馆藏管理服务平台 - Group4作品</p>
            </div>

            <div class="info-card">
                <div class="card-title">
                    <i class="fas fa-clock"></i>
                    <span>开馆时间通知</span>
                    <span class="card-subtitle">Normal</span>
                </div>

                <div class="time-row">
                    <div class="time-icon"><i class="fas fa-sun"></i></div>
                    <div class="time-content">
                        <label>周一至周日 (Mon - Sun)</label>
                        <span>07:00 - 22:30</span>
                    </div>
                </div>

                <div class="time-row">
                    <div class="time-icon"><i class="fas fa-book-reader"></i></div>
                    <div class="time-content">
                        <label>自助还书区 (Self Service)</label>
                        <span>24 Hours Open</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <h2 class="auth-title">统一身份认证</h2>
            <p class="auth-subtitle">Use NCEPU ID to sign in</p>

            <div class="tab-title">
                <span>账号登录</span>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                    <div class="alert-box alert-{{ category }}">
                        <i class="fas fa-exclamation-circle"></i> {{ message }}
                    </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <form action="{{ url_for('auth.login') }}" method="POST">

                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fas fa-user-circle"></i>
                        <input type="text" name="user_id" placeholder="学号 / 工号 / Reader ID" required>
                    </div>
                </div>

                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fas fa-lock"></i>
                        <input type="password" name="password" placeholder="请输入密码 / Password" required>
                    </div>
                </div>

                <div class="form-group captcha-group">
                    <div class="input-wrapper">
                        <i class="fas fa-shield-alt"></i>
                        <input type="text" placeholder="验证码 (7392)">
                    </div>
                    <div class="captcha-img" title="点击刷新"></div>
                </div>

                <div class="links">
                    <a href="#">忘记密码?</a>
                    <a href="{{ url_for('auth.register') }}">用户注册 <i class="fas fa-arrow-right" style="font-size: 10px;"></i></a>
                </div>

                <div class="action-buttons">
                    <button type="submit" class="btn-login">登 录</button>
                    <a href="{{ url_for('auth.guest_login') }}" class="btn-guest">
                        <i class="fas fa-user-secret" style="margin-right: 6px;"></i> 访客
                    </a>
                </div>
            </form>

            <div class="footer-text">
                <p>请使用校园一卡通账号登录</p>
                <p>技术支持：华北电力大学网络与信息化中心</p>
            </div>
        </div>
    </div>

</body>
</html>