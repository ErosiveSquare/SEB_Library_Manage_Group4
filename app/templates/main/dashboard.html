{% extends "base.html" %}

{% block content %}
<div class="stat-grid">
    <div class="stat-item">
        <div class="stat-icon-wrapper"><i class="fas fa-book"></i></div>
        <div class="stat-num">{{ total_books }}</div>
        <div class="stat-label">馆藏现有 (在馆)</div>
    </div>
    <div class="stat-item">
        <div class="stat-icon-wrapper" style="background:#ecfdf5; color:#10b981;"><i class="fas fa-star"></i></div>
        <div class="stat-num">{{ credit }}</div>
        <div class="stat-label">当前信用分 (Credit)</div>
    </div>
    </div>

<div class="card">
    <div class="card-header-row">
        <div class="card-title">最近借阅记录 / Recent Activity</div>
    </div>

    <table class="clean-table">
        <thead>
            <tr>
                <th>图书信息</th>
                <th>借阅时间</th>
                <th>应还时间</th>
                <th>状态</th>
            </tr>
        </thead>
        <tbody>
            {% for act in activities %}
            <tr>
                <td>
                    <div style="font-weight:500;">{{ act['BOOK_NAME'] }}</div>
                    <div style="font-size:12px; color:#999;">Barcode: {{ act['BARCODE'] }}</div>
                </td>
                <td>{{ act['BORROW_DATE'] }}</td>
                <td>{{ act['DUE_DATE'] }}</td>
                <td>
                    {% if act['STATUS'] == 1 %}
                    <span style="color:#10b981; background:#ecfdf5; padding:4px 10px; border-radius:20px; font-size:12px;">借阅中</span>
                    {% elif act['STATUS'] == 3 %}
                    <span style="color:#ef4444; background:#fef2f2; padding:4px 10px; border-radius:20px; font-size:12px;">已逾期</span>
                    {% else %}
                    <span style="color:#64748b; background:#f1f5f9; padding:4px 10px; border-radius:20px; font-size:12px;">已归还</span>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr><td colspan="4">暂无借阅记录</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}